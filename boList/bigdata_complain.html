<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>客户投诉内容词频分析</title>
    <link rel="stylesheet" href="../css/boList_e.css">
    <style>
        .box{
            padding: 10px 10px 0;
        }
        .ibox_content{
            display: inline-block;
            width:47.3vw;
            height:53vh;
        }
        .ibox_content:nth-of-type(1){
            width:60vw;
            height:95vh;
        }
        .div_top .ibox_content:nth-of-type(2),
        .div_top .ibox_content:nth-of-type(3){
            width:35vw;
            height:46vh;
        }
        #cartype,#car_parts{
            width:35vw;
            height:36vh;
        }
        #customer,#character_cloud{
            width:48vw;
            height:45vh;
        }
    </style>
</head>
<body>
<div class="box">
    <div class="div_top" style="overflow: hidden;margin-bottom: 15px;">
        <div class="ibox_content" style="float: left;">
            <div class="ibox_title">
                <h5>客户投诉区域分布分析</h5>
            </div>
            <div id="myChart" style="width: 60vw;height:85vh;"></div>
        </div>
        <!--<div id="city"></div>-->
        <div class="ibox_content" style="float: right;">
            <div class="ibox_title">
                <h5>投诉车型分析</h5>
            </div>
            <div id="cartype" class="div_box"></div>
        </div>
        <div class="ibox_content" style="float: right;margin-top: 15px;">
            <div class="ibox_title">
                <h5>投诉车辆配件或故障相关</h5>
            </div>
            <div id="car_parts" class="div_box"></div>
        </div>
    </div>
    <div class="ibox_content" style="margin-right: 15px;">
        <div class="ibox_title">
            <h5>客户服务投诉分析</h5>
        </div>
        <div id="customer" class="div_box"></div>
    </div>
    <div class="ibox_content">
        <div class="ibox_title">
            <h5>投诉内容词频云图</h5>
        </div>
        <div id="character_cloud" class="div_box"></div>
    </div>
    <footer>
        注：本分析场景数据样本时间为2017.01.01-2017.06.30
    </footer>
</div>

<script src="../js/jquery-2.1.1.min.js"></script>
<script src="../js/echarts-all.js"></script>
<script>
    function myChart() {
        var myChart=echarts.init(document.getElementById('myChart'));
        var option = {
            tooltip : {
                trigger: 'item',
                formatter: function(params) {
                    var res = params.name+'<br/>';
                    var myseries = option.series;
                    for (var i = 0; i < myseries.length; i++) {
                        for(var j=0;j<myseries[i].data.length;j++){
                            if(myseries[i].data[j].name==params.name){
                                res+=myseries[i].name +' : '+myseries[i].data[j].value+'</br>';
                            }
                        }
                    }
                    return res;
                }
            },
            legend: {
                orient: 'vertical',
                x:'left',
                data:['X35','X65','D50']
            },
            color:['rgb(68,172,224)','rgb(69,203,221)','rgb(91,206,162)'],
            dataRange: {
                show:false,
                min: 0,
                max: 2500,
                x: 'left',
                y: 'bottom',
                text:['高','低'],           // 文本，默认为数值文本
                calculable : true
            },
            series : [
                {
                    name: 'X35',
                    type: 'map',
                    mapType: 'china',
                    roam: false,
                    itemStyle:{
                        normal:{label:{show:true}},
                        emphasis:{label:{show:true}}
                    },
                    showLegendSymbol: false,
                    data:[
                        {name: '北京',value: Math.round(Math.random()*1000)},
                        {name: '天津',value: Math.round(Math.random()*1000)},
                        {name: '上海',value: Math.round(Math.random()*1000)},
                        {name: '重庆',value: Math.round(Math.random()*1000)},
                        {name: '河北',value: Math.round(Math.random()*1000)},
                        {name: '河南',value: Math.round(Math.random()*1000)},
                        {name: '云南',value: Math.round(Math.random()*1000)},
                        {name: '辽宁',value: Math.round(Math.random()*1000)},
                        {name: '黑龙江',value: Math.round(Math.random()*1000)},
                        {name: '湖南',value: Math.round(Math.random()*1000)},
                        {name: '安徽',value: Math.round(Math.random()*1000)},
                        {name: '山东',value: Math.round(Math.random()*1000)},
                        {name: '新疆',value: Math.round(Math.random()*1000)},
                        {name: '江苏',value: Math.round(Math.random()*1000)},
                        {name: '浙江',value: Math.round(Math.random()*1000)},
                        {name: '江西',value: Math.round(Math.random()*1000)},
                        {name: '湖北',value: Math.round(Math.random()*1000)},
                        {name: '广西',value: Math.round(Math.random()*1000)},
                        {name: '甘肃',value: Math.round(Math.random()*1000)},
                        {name: '山西',value: Math.round(Math.random()*1000)},
                        {name: '内蒙古',value: Math.round(Math.random()*1000)},
                        {name: '陕西',value: Math.round(Math.random()*1000)},
                        {name: '吉林',value: Math.round(Math.random()*1000)},
                        {name: '福建',value: Math.round(Math.random()*1000)},
                        {name: '贵州',value: Math.round(Math.random()*1000)},
                        {name: '广东',value: Math.round(Math.random()*1000)},
                        {name: '青海',value: Math.round(Math.random()*1000)},
                        {name: '西藏',value: Math.round(Math.random()*1000)},
                        {name: '四川',value: Math.round(Math.random()*1000)},
                        {name: '宁夏',value: Math.round(Math.random()*1000)},
                        {name: '海南',value: Math.round(Math.random()*1000)},
                        {name: '台湾',value: Math.round(Math.random()*1000)},
                        {name: '香港',value: Math.round(Math.random()*1000)},
                        {name: '澳门',value: Math.round(Math.random()*1000)}
                    ]
                },
                {
                    name: 'X65',
                    type: 'map',
                    mapType: 'china',
                    itemStyle:{
                        normal:{label:{show:true}},
                        emphasis:{label:{show:true}}
                    },
                    data:[
                        {name: '北京',value: Math.round(Math.random()*1000)},
                        {name: '天津',value: Math.round(Math.random()*1000)},
                        {name: '上海',value: Math.round(Math.random()*1000)},
                        {name: '重庆',value: Math.round(Math.random()*1000)},
                        {name: '河北',value: Math.round(Math.random()*1000)},
                        {name: '安徽',value: Math.round(Math.random()*1000)},
                        {name: '新疆',value: Math.round(Math.random()*1000)},
                        {name: '浙江',value: Math.round(Math.random()*1000)},
                        {name: '江西',value: Math.round(Math.random()*1000)},
                        {name: '山西',value: Math.round(Math.random()*1000)},
                        {name: '内蒙古',value: Math.round(Math.random()*1000)},
                        {name: '吉林',value: Math.round(Math.random()*1000)},
                        {name: '福建',value: Math.round(Math.random()*1000)},
                        {name: '广东',value: Math.round(Math.random()*1000)},
                        {name: '西藏',value: Math.round(Math.random()*1000)},
                        {name: '四川',value: Math.round(Math.random()*1000)},
                        {name: '宁夏',value: Math.round(Math.random()*1000)},
                        {name: '香港',value: Math.round(Math.random()*1000)},
                        {name: '澳门',value: Math.round(Math.random()*1000)}
                    ]
                },
                {
                    name: 'D50',
                    type: 'map',
                    mapType: 'china',
                    itemStyle:{
                        normal:{label:{show:true}},
                        emphasis:{label:{show:true}}
                    },
                    data:[
                        {name: '北京',value: Math.round(Math.random()*1000)},
                        {name: '天津',value: Math.round(Math.random()*1000)},
                        {name: '上海',value: Math.round(Math.random()*1000)},
                        {name: '广东',value: Math.round(Math.random()*1000)},
                        {name: '台湾',value: Math.round(Math.random()*1000)},
                        {name: '香港',value: Math.round(Math.random()*1000)},
                        {name: '澳门',value: Math.round(Math.random()*1000)}
                    ]
                }
            ]
        };
        myChart.setOption(option);
    }
    myChart();
</script>
<script>
    //客户服务相关
    function customer() {
        var customer=echarts.init(document.getElementById("customer"));
        var customer_option = {
//            title : {
//                text: '客户服务投诉分析',
//                x:'center'
//            },
            grid:{
                y:30
            },
            tooltip : {
                trigger: 'axis'
            },
            xAxis : [
                {
                    type : 'category',
                    axisLabel : {
                        interval:0,
                        rotate:35
                    },
//                    splitArea:{
//                        show:true,
//                        areaStyle:{color:'#eee'}
//                    },
                    name : '主题词',
                    nameTextStyle: {
                        color: ['#000']
                    },
                    data : ['客服','购车','厂家','订购','处理','投诉','车管所','二网',
                        '售后','退车','中农','全福','经理','耐心','一网']
                }
            ],
            yAxis : [
                {
                    type : 'value',
                    name : '词频',
                    nameTextStyle: {
                        color: ['#000']
                    }
                }
            ],
            series : [
                {
                    name:'词频',
                    type:'bar',
                    barWidth:20,
                    itemStyle: {
                        normal: {
                            color:'rgb(68,172,224)'
                        }
                    },
                    data:[0.499039258107, 0.330738690579, 0.277805748775, 0.254223823967, 0.233952103297,
                        0.150137895817, 0.103879845376, 0.090876824765, 0.0556428869104, 0.023893877365,
                        0.0197549428895, 0.0189029524072, 0.0102842966779, 0.0101292796611, 0.00885259223641]
                }
            ]
        };
        customer.setOption(customer_option);
    }
    customer();
    //车辆配件或故障相关
    function car_parts() {
        var car_parts=echarts.init(document.getElementById("car_parts"));
        var car_parts_option = {
//            title : {
//                text: '投诉车辆配件或故障相关',
//                x:'center'
//            },
            grid:{
                y:30
            },
            tooltip : {
                trigger: 'axis'
            },
            xAxis : [
                {
                    type : 'category',
                    axisLabel : {
                        interval:0,
                        rotate:65
                    },
//                    splitArea:{
//                        show:true,
//                        areaStyle:{color:'#eee'}
//                    },
                    name : '主题词',
                    nameTextStyle: {
                        color: ['#000']
                    },
                    data : ['导航','4S店','更换','到货','空调','异响','保养','置换',
                        '发动机','变速箱','离合','起火','抖动','机油','加装']
                }
            ],
            yAxis : [
                {
                    type : 'value',
                    name : '词频',
                    nameTextStyle: {
                        color: ['#000']
                    }
                }
            ],
            series : [
                {
                    name:'词频',
                    type:'bar',
                    barWidth:10,
                    itemStyle: {
                        normal: {
                            color:'rgb(68,172,224)'
                        }
                    },
                    data:[0.381450519078, 0.375063889493, 0.328655904098, 0.324585611489, 0.232885286493,
                        0.209069226916, 0.128867816553, 0.0997260794115, 0.0707104164551, 0.0593946583015,
                        0.0477488452608, 0.0240594544532, 0.0206727413635, 0.014398977254, 0.014235221517]
                }
            ]
        };
        car_parts.setOption(car_parts_option);
    }
    car_parts();
    //车型相关
    function cartype() {
        var cartype=echarts.init(document.getElementById("cartype"));
        var cartype_option = {
//            title : {
//                text: '投诉车型分析',
//                x:'center'
//            },
            grid:{
                y:30
            },
            tooltip : {
                trigger: 'axis'
            },
            xAxis : [
                {
                    type : 'category',
                    axisLabel : {
                        interval:0,
                        rotate:65
                    },
//                    splitArea:{
//                        show:true,
//                        areaStyle:{color:'#eee'}
//                    },
                    name : '主题词',
                    nameTextStyle: {
                        color: ['#000']
                    },
                    data : ['绅宝','D50','威旺','306','M20','天骏','京驰','金瑞',
                        'D70','307','315','新乡','205','BJ40','X65']
                }
            ],
            yAxis : [
                {
                    type : 'value',
                    name : '词频',
                    nameTextStyle: {
                        color: ['#000']
                    }
                }
            ],
            series : [
                {
                    name:'词频',
                    type:'bar',
                    barWidth:10,
                    itemStyle: {
                        normal: {
                            color:'rgb(68,172,224)'
                        }
                    },
                    data:[0.138679085191, 0.133951389104, 0.0619853486836, 0.0472769608604, 0.0304673747767,
                        0.0246890795604, 0.018385484779, 0.0170167653817, 0.00840479304185, 0.00787949347673,
                        0.0068288943465, 0.00560408314689, 0.00525299565116, 0.00472769608604, 0.00315179739069]
                }
            ]
        };
        cartype.setOption(cartype_option);
    }
    cartype();
    //投诉区域或城市相关
    function city() {
        var city=echarts.init(document.getElementById("city"));
        var city_option = {
//            title : {
//                text: '投诉区域或城市相关',
//                x:'center'
//            },
            tooltip : {
                trigger: 'axis'
            },
            xAxis : [
                {
                    type : 'category',
                    axisLabel : {
                        interval:0,
                        rotate:35
                    },
//                    splitArea:{
//                        show:true,
//                        areaStyle:{color:'#eee'}
//                    },
                    name : '主题词',
                    nameTextStyle: {
                        color: ['#000']
                    },
                    data : ['许昌','天津','平顶山','万城','沧州','商丘','长春','济宁',
                        '深圳','成都','泉州','郑州','邢台','廊坊','菏泽']
                }
            ],
            yAxis : [
                {
                    type : 'value',
                    name : '词频',
                    nameTextStyle: {
                        color: ['#000']
                    }
                }
            ],
            series : [
                {
                    name:'词频',
                    type:'bar',
                    barWidth:20,
                    itemStyle: {
                        normal: {
                            color:'rgb(68,172,224)'
                        }
                    },
                    data:[0.214159641953, 0.0187343483761, 0.0184373790725, 0.0147083878232, 0.0127527094594,
                        0.0123544177689, 0.0105576501979, 0.00886785229051, 0.00708252997987, 0.00703184235782,
                        0.00667296006877, 0.00633821405388, 0.00633418020751, 0.00628939171383, 0.00618276740945]
                }
            ]
        };
        city.setOption(city_option);
    }
    //    city();
    //随机颜色
    function createRandomItemStyle() {
        return {
            normal: {
                color: 'rgb(' + [
                    Math.round(Math.random() * 160),
                    Math.round(Math.random() * 160),
                    Math.round(Math.random() * 160)
                ].join(',') + ')'
            }
        };
    }
    //字符云
    function character_cloud() {
        var character_cloud=echarts.init(document.getElementById("character_cloud"));
        var character_cloud_option = {
//            title: {
//                text: '投诉内容词频云图',
//                x:'center'
//            },
            tooltip: {
                show: true
            },
            series: [{
                name: '投诉内容词频云图',
                type: 'wordCloud',
                size: ['100%', '100%'],
                textRotation : [0, 45, 90, -45],
                textPadding: 0,
                autoSize: {
                    enable: true,
                    minSize: 14
                },
                data: [
                    {
                        name: "经销商",
                        value: 8722,
                        itemStyle: {
                            normal: {
                                color: 'black'
                            }
                        }
                    },
                    {
                        name: "客服",
                        value: 4990,
                        itemStyle: createRandomItemStyle()
                    },
                    {
                        name: "导航",
                        value: 3814,
                        itemStyle: createRandomItemStyle()
                    },
                    {
                        name: "4S店",
                        value: 3750,
                        itemStyle: createRandomItemStyle()
                    },
                    {
                        name: "购车",
                        value: 3307,
                        itemStyle: createRandomItemStyle()
                    },
                    {
                        name: "更换",
                        value: 3286,
                        itemStyle: createRandomItemStyle()
                    },
                    {
                        name: "到货",
                        value: 3245,
                        itemStyle: createRandomItemStyle()
                    },
                    {
                        name: "厂家",
                        value: 2778,
                        itemStyle: createRandomItemStyle()
                    },
                    {
                        name: "订购",
                        value: 2542,
                        itemStyle: createRandomItemStyle()
                    },
                    {
                        name: "处理",
                        value: 2339,
                        itemStyle: createRandomItemStyle()
                    },
                    {
                        name: "空调",
                        value: 2328,
                        itemStyle: createRandomItemStyle()
                    },
                    {
                        name: "许昌",
                        value: 2141,
                        itemStyle: createRandomItemStyle()
                    },
                    {
                        name: "异响",
                        value: 2090,
                        itemStyle: createRandomItemStyle()
                    },
                    {
                        name: "投诉",
                        value: 1501,
                        itemStyle: createRandomItemStyle()
                    },
                    {
                        name: "绅宝",
                        value: 1386,
                        itemStyle: createRandomItemStyle()
                    },
                    {
                        name: "D50",
                        value: 1339,
                        itemStyle: createRandomItemStyle()
                    },
                    {
                        name: "保养",
                        value: 1288,
                        itemStyle: createRandomItemStyle()
                    },
                    {
                        name: "车管所",
                        value: 1038,
                        itemStyle: createRandomItemStyle()
                    },
                    {
                        name: "置换",
                        value: 997,
                        itemStyle: createRandomItemStyle()
                    },
                    {
                        name: "二网",
                        value: 908,
                        itemStyle: createRandomItemStyle()
                    },
                    {
                        name: "发动机",
                        value: 707,
                        itemStyle: createRandomItemStyle()
                    },
                    {
                        name: "威旺",
                        value: 619,
                        itemStyle: createRandomItemStyle()
                    },
                    {
                        name: "变速箱",
                        value: 593,
                        itemStyle: createRandomItemStyle()
                    },
                    {
                        name: "售后",
                        value: 556,
                        itemStyle: createRandomItemStyle()
                    },
                    {
                        name: "离合",
                        value: 477,
                        itemStyle: createRandomItemStyle()
                    },
                    {
                        name: "306",
                        value: 472,
                        itemStyle: createRandomItemStyle()
                    },
                    {
                        name: "M20",
                        value: 304,
                        itemStyle: createRandomItemStyle()
                    },
                    {
                        name: "天骏",
                        value: 246,
                        itemStyle: createRandomItemStyle()
                    },
                    {
                        name: "起火",
                        value: 240,
                        itemStyle: createRandomItemStyle()
                    },
                    {
                        name: "退车",
                        value: 238,
                        itemStyle: createRandomItemStyle()
                    }
                ]
            }]
        };
        character_cloud.setOption(character_cloud_option);
    }
    character_cloud();
</script>
</body>
</html>